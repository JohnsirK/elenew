webpackJsonp([2],{"5zde":function(t,e,a){a("zQR9"),a("qyJz"),t.exports=a("FeBl").Array.from},"9uLx":function(t,e,a){"use strict";var n={name:"todayHot",props:["datalist"],data:function(){return{imgUrl:"http://cangdu.org:8001/img/",offset:0,noRepeat:!1}},components:{loading:a("Yqf6").a},methods:{},mounted:function(){}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"todayHotList"},[a("ul",t._l(t.datalist,function(e,n){return a("li",{key:n},[a("router-link",{attrs:{to:{name:"shop",query:{id:e.id}}}},[a("div",{staticClass:"imgleft"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imgUrl+e.image_path,expression:"imgUrl + item.image_path"}],attrs:{src:t.imgUrl+e.image_path,alt:e.name}})]),t._v(" "),a("div",{staticClass:"txtright"},[a("h5",[a("van-tag",{attrs:{type:"danger",mark:""}},[t._v("标签")]),t._v("\n\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t\t"),a("em",t._l(e.supports,function(e,n){return a("font",{key:n,style:"color:#"+e.icon_color},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e.icon_name)+"\n\t\t\t\t\t\t\t")])}),1)],1),t._v(" "),a("div",{staticClass:"reta-txt"},[a("div",{staticClass:"reta-icon"},[a("van-rate",{attrs:{gutter:".02rem",size:".26rem",readonly:"","allow-half":""},model:{value:e.rating,callback:function(a){t.$set(e,"rating",a)},expression:"item.rating"}})],1),t._v(" "),a("font",{staticClass:"pingf"},[t._v("\n\t\t\t\t\t\t\t"+t._s(e.rating)+"\n\t\t\t\t\t\t")]),t._v(" "),a("font",{staticClass:"yues"},[t._v("\n\t\t\t\t\t\t\t月售"+t._s(e.recent_order_num)+"单\n\t\t\t\t\t\t")]),t._v(" "),a("span",[e.delivery_mode?a("b",[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e.delivery_mode.text)+"\n\t\t\t\t\t\t\t")]):t._e()])],1),t._v(" "),a("p",[a("font",[t._v("\n\t\t\t\t\t\t\t￥"+t._s(e.float_minimum_order_amount)+"起送 / 配送费约￥"+t._s(e.float_delivery_fee)+"\n\t\t\t\t\t\t")]),t._v(" "),a("em",[t._v("\n\t\t\t\t\t\t\t"+t._s(e.distance)+" / "),a("b",[t._v(t._s(e.order_lead_time))])])],1)])])],1)}),0),t._v(" "),t.datalist<=0?a("loading"):t._e()],1)},staticRenderFns:[]};var r=a("VU/8")(n,i,!1,function(t){a("HUtB")},null,null);e.a=r.exports},Gu7T:function(t,e,a){"use strict";e.__esModule=!0;var n,i=a("c/Tr"),r=(n=i)&&n.__esModule?n:{default:n};e.default=function(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return(0,r.default)(t)}},HUtB:function(t,e){},Yqf6:function(t,e,a){"use strict";var n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"loading"},[e("van-loading",{attrs:{size:"24px"}},[this._v("加载中...")])],1)},staticRenderFns:[]};var i=a("VU/8")({data:function(){return{}}},n,!1,function(t){a("euAM")},null,null);e.a=i.exports},"c/Tr":function(t,e,a){t.exports={default:a("5zde"),__esModule:!0}},euAM:function(t,e){},f9ti:function(t,e){},fBQ2:function(t,e,a){"use strict";var n=a("evD5"),i=a("X8DO");t.exports=function(t,e,a){e in t?n.f(t,e,i(0,a)):t[e]=a}},qyJz:function(t,e,a){"use strict";var n=a("+ZMJ"),i=a("kM2E"),r=a("sB3e"),s=a("msXi"),o=a("Mhyx"),l=a("QRG4"),c=a("fBQ2"),u=a("3fs2");i(i.S+i.F*!a("dY0y")(function(t){Array.from(t)}),"Array",{from:function(t){var e,a,i,d,f=r(t),v="function"==typeof this?this:Array,h=arguments.length,_=h>1?arguments[1]:void 0,m=void 0!==_,g=0,p=u(f);if(m&&(_=n(_,h>2?arguments[2]:void 0,2)),void 0==p||v==Array&&o(p))for(a=new v(e=l(f.length));e>g;g++)c(a,g,m?_(f[g],g):f[g]);else for(d=p.call(f),a=new v;!(i=d.next()).done;g++)c(a,g,m?s(d,_,[i.value,g],!0):i.value);return a.length=g,a}})},uvGh:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Gu7T"),i=a.n(n),r=a("mvHQ"),s=a.n(r),o=a("Xxa5"),l=a.n(o),c=a("exGp"),u=a.n(c),d=a("WsNp"),f=a("9uLx"),v=a("P9l9"),h=a("Yqf6"),_={data:function(){return{dataList:[],latitude:this.$route.query.geohash.split(",")[0],longitude:this.$route.query.geohash.split(",")[1],offset:0,limit:20,restaurant_category_id:this.$route.query.restaurant_category_id,order_by:4,value1:"分类",option2:[{text:"起送价最低",value:1},{text:"配送最快",value:2},{text:"评分最高",value:3},{text:"智能排序",value:4},{text:"距离最近",value:5},{text:"销量最高",value:6}],categoryData:[],mainActiveIndex:0,activeId:null,noRepeat:!1,isShow:!1}},components:{allHeader:d.a,listData:f.a,loading:h.a},methods:{getData:function(t,e,a,n,i,r,s){var o=this;return u()(l.a.mark(function c(){var u;return l.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return o.offset=0,l.next=3,Object(v.t)(t,e,a,n,i,r,s);case 3:(u=l.sent)&&(o.dataList=u,o.$toast.clear());case 5:case"end":return l.stop()}},c,o)}))()},getCategory:function(){var t=this;return u()(l.a.mark(function e(){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.e)(t.latitude,t.longitude);case 2:(a=e.sent)&&(t.categoryData=JSON.parse(s()(a).replace(/name/gi,"text").replace(/sub_categories/gi,"children")));case 4:case"end":return e.stop()}},e,t)}))()},onClickNav:function(t){this.mainActiveIndex=t},onClickItem:function(t){this.activeId=t.id,this.value1=t.text,this.offset=0,this.$toast.loading({mask:!0,message:"数据加载中...",duration:0}),this.getData(this.latitude,this.longitude,this.offset,this.limit,this.restaurant_category_id,this.order_by,[this.activeId]),this.$refs.pickguize.toggle()},getMoreData:function(){var t=this;return u()(l.a.mark(function e(){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.noRepeat){e.next=2;break}return e.abrupt("return");case 2:return t.isShow=!0,t.noRepeat=!0,t.offset+=20,e.next=7,Object(v.t)(t.latitude,t.longitude,t.offset,t.limit,t.restaurant_category_id,t.order_by,[t.activeId]);case 7:a=e.sent,t.isShow=!1,a&&(t.dataList=[].concat(i()(t.dataList),i()(a))),t.noRepeat=!1;case 11:case"end":return e.stop()}},e,t)}))()},scrollGetData:function(){var t=this.$refs.allheight.offsetHeight||this.$refs.allheight.clientHeight;document.documentElement.clientHeight+(document.body.scrollTop||document.documentElement.scrollTop)>t-30&&(this.isShow=!0,this.getMoreData())},onOrder:function(){console.log(this.order_by),this.offset=0,this.$toast.loading({mask:!0,message:"数据加载中...",duration:0}),this.getData(this.latitude,this.longitude,this.offset,this.limit,this.restaurant_category_id,this.order_by,[this.activeId])}},computed:{},mounted:function(){this.getData(this.latitude,this.longitude,this.offset,this.limit,this.restaurant_category_id,this.order_by),this.getCategory(),window.addEventListener("scroll",this.scrollGetData)},destroyed:function(){window.removeEventListener("scroll",this.scrollGetData)}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("all-header",[a("font",{attrs:{slot:"tl"},slot:"tl"},[t._v("\n\t\t\t"+t._s(this.$route.query.title)+"\n\t\t")])],1),t._v(" "),a("div",{ref:"allheight",staticClass:"content p-b50"},[a("van-sticky",{attrs:{"offset-top":46}},[a("van-dropdown-menu",{staticStyle:{"box-shadow":"0 2px 5px rgba(196, 196, 196, 0.4)"},attrs:{overlay:""}},[a("van-dropdown-item",{ref:"pickguize",attrs:{title:t.value1}},[a("van-tree-select",{attrs:{items:t.categoryData,"main-active-index":t.mainActiveIndex,"active-id":t.activeId,info:"30"},on:{"click-nav":t.onClickNav,"click-item":t.onClickItem}})],1),t._v(" "),a("van-dropdown-item",{attrs:{options:t.option2},on:{change:t.onOrder},model:{value:t.order_by,callback:function(e){t.order_by=e},expression:"order_by"}})],1)],1),t._v(" "),a("div",{staticClass:"todayHot"},[a("list-data",{attrs:{datalist:t.dataList}}),t._v(" "),t.isShow?a("loading"):t._e()],1)],1)],1)},staticRenderFns:[]};var g=a("VU/8")(_,m,!1,function(t){a("f9ti")},null,null);e.default=g.exports}});