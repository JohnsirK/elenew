webpackJsonp([14],{FHzu:function(t,s){},ar59:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("Xxa5"),i=e.n(a),n=e("exGp"),c=e.n(n),r=e("Dd8w"),o=e.n(r),l=e("WsNp"),h=e("P9l9"),u=e("NYxO"),v=e("ZHmP"),_={data:function(){return{imgUrl:"https://elm.cangdu.org/",searchValue:"",searchEndList:[],searchHisList:[]}},components:{allHeader:l.a},computed:o()({},Object(u.d)(["pickAddress"])),methods:{onSearch:function(){var t=this;return c()(i.a.mark(function s(){var e,a,n;return i.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t.$toast.loading({mask:!0,message:"搜索中,请稍后"}),s.next=3,Object(h.v)(t.pickAddress.geohash,t.searchValue);case 3:(e=s.sent)&&(t.$toast.clear(),t.$toast("搜索失败，请稍后再试！"),t.searchEndList=e),(a=v.a.getSession("hislist"))?(n=!1,t.searchHisList=a,t.searchHisList.forEach(function(s){s==t.searchValue&&(n=!0)}),n||(t.searchHisList.push(t.searchValue),v.a.setSession("hislist",t.searchHisList))):t.searchHisList.push(t.searchValue),v.a.setSession("hislist",t.searchHisList),t.searchValue="";case 9:case"end":return s.stop()}},s,t)}))()},hisClick:function(t,s){console.log(t,s)},removeThis:function(t){this.searchHisList.splice(t,1),v.a.setSession("hislist",this.searchHisList)},allClear:function(){this.searchHisList=[],v.a.setSession("hislist",this.searchHisList)},checkInput:function(){}},mounted:function(){v.a.getSession("hislist")&&(this.searchHisList=v.a.getSession("hislist"))}},d={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"main"},[e("all-header",[e("font",{attrs:{slot:"tl"},slot:"tl"},[t._v("\n\t\t\t搜索\n\t\t")])],1),t._v(" "),e("div",{staticClass:"content p-b50"},[e("van-search",{attrs:{placeholder:"请输入商家或者美食名称",shape:"round","show-action":""},on:{input:t.checkInput},model:{value:t.searchValue,callback:function(s){t.searchValue=s},expression:"searchValue"}},[e("div",{attrs:{slot:"action"},on:{click:t.onSearch},slot:"action"},[t._v("搜索")])]),t._v(" "),t.searchEndList.length>0?e("div",[e("h2",{staticClass:"title"},[t._v("\n\t\t\t\t商家\n\t\t\t")]),t._v(" "),e("ul",{staticClass:"searchList"},t._l(t.searchEndList,function(s,a){return e("li",{key:a},[e("router-link",{attrs:{to:{path:"/shop",id:s.id}}},[e("span",[e("img",{attrs:{src:t.imgUrl+s.image_path,alt:""}})]),t._v(" "),e("div",{staticClass:"txt"},[e("h4",[t._v("\n\t\t\t\t\t\t\t\t"+t._s(s.name)+"\n\t\t\t\t\t\t\t")]),t._v(" "),e("h6",[t._v(t._s(s.category))]),t._v(" "),e("h5",[e("font",[t._v("月售 "+t._s(s.recent_order_num)+" 单")]),t._v(" "),e("font",[t._v(t._s(s.float_delivery_fee)+"元起送")]),t._v("\n\t\t\t\t\t\t\t\t /\n\t\t\t\t\t\t\t\t "),e("font",[t._v("距离 "+t._s(s.distance))])],1),t._v(" "),t._l(s.activities,function(s,a){return e("p",{key:a},[e("i",{staticStyle:{color:"#fff"},style:{background:s.icon_color}},[t._v(t._s(s.icon_name))]),t._v(" "),e("font",[t._v(t._s(s.name))]),t._v(" "),e("em",[t._v(t._s(s.description))])],1)})],2)])],1)}),0)]):e("div",{staticClass:"his"},[e("dl",[e("dt",[t._v("\n\t\t\t\t\t搜索历史\n\t\t\t\t")]),t._v(" "),t._l(t.searchHisList,function(s,a){return e("dd",{key:a,on:{click:function(e){return t.hisClick(s)}}},[t._v("\n\t\t\t\t\t"+t._s(s)+"\n\t\t\t\t\t"),e("van-icon",{staticClass:"remove",attrs:{name:"cross"},on:{click:function(s){return t.removeThis(a)}}})],1)})],2),t._v(" "),e("p",{staticClass:"allClear",on:{click:t.allClear}},[t._v("\n\t\t\t\t清除历史记录\n\t\t\t")])])],1)],1)},staticRenderFns:[]};var f=e("VU/8")(_,d,!1,function(t){e("FHzu")},"data-v-7e2bb633",null);s.default=f.exports}});